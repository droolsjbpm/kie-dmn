
match also for $ic1 equals $ic2

rule ITEMCOMP_DUPLICATED
when
  $id : ItemDefinition( $ic1 : /itemComponent )
  ItemDefinition( this == $id, $ic2 : /itemComponent{name == $ic1.name}, $ic1 != $ic2 )
then
  entryPoints["PROBLEMS"].insert( "ITEMCOMP_DUPLICATED "+$ic1 + " " +$ic2 );
end

does not work:

rule ITEMCOMP_DUPLICATED
when
  $id : ItemDefinition( $ic1 : /itemComponent , $ic2 : /itemComponent{name == $ic1.name}, $ic1 != $ic2 )
then
  entryPoints["PROBLEMS"].insert( "ITEMCOMP_DUPLICATED "+$ic1 + " " +$ic2 );
end

does not trigger:

rule ITEMCOMP_DUPLICATED
when
  $ic1 : ItemDefinition( parent instanceof ItemDefinition ,
                         $curName : name,
                         $ic2: /parent{#ItemDefinition}/itemComponent{name == $curName, this != $ic1 } )
then

does not trigger:

rule ITEMCOMP_DUPLICATED
when
  $ic1 : ItemDefinition( parent instanceof ItemDefinition ,
                         $curName : name, $curId : id, 
                         $ic2: /parent{#ItemDefinition}/itemComponent{name == $curName, id != $curId } )
then
  System.out.println($ic1 + " " +$ic2);
  entryPoints["PROBLEMS"].insert( new Problem( $ic1, P.ITEMCOMP_DUPLICATED ) );
end